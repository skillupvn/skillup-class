<!DOCTYPE html>
<html lang="vi"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω Trung T√¢m - V4.0</title>

    <!-- ========== TH∆Ø VI·ªÜN B√äN NGO√ÄI ========== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Chart.js v4 - Lightweight -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- CryptoJS - Th∆∞ vi·ªán m√£ h√≥a -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>

    

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- ============================================================
         üîê M√ÄN H√åNH ƒêƒÇNG NH·∫¨P
         ============================================================ -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-logo">
                <div class="logo-icon">üìö</div>
                <h1>H·ªÜ TH·ªêNG QU·∫¢N L√ù</h1>
                <p>Trung T√¢m D·∫°y H·ªçc</p>
            </div>

            <div class="login-error" id="loginError">
                <span>‚ö†Ô∏è</span>
                <span id="loginErrorText">Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u</span>
            </div>

            <form class="login-form" id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>T√™n ƒëƒÉng nh·∫≠p</label>
                    <div class="input-wrapper">
                        <span class="input-icon">üë§</span>
                        <input type="text" id="loginUsername" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p" required="" autocomplete="username">
                    </div>
                </div>

                <div class="form-group">
                    <label>M·∫≠t kh·∫©u</label>
                    <div class="input-wrapper">
                        <span class="input-icon">üîí</span>
                        <input type="password" id="loginPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required="" autocomplete="current-password">
                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility()">üëÅÔ∏è</button>
                    </div>
                </div>

                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox" id="rememberMe">
                        <span>Ghi nh·ªõ ƒëƒÉng nh·∫≠p</span>
                    </label>
                </div>

                <button type="submit" class="btn-login" id="btnLogin">
                    <span>ƒêƒÉng nh·∫≠p</span>
                </button>
            </form>

            <div class="login-footer">
                <p>Version 4.0 - VSHüì®2026</p>
            </div>
        </div>
    </div>

    <!-- ============================================================
         üìê ·ª®NG D·ª§NG CH√çNH
         ============================================================ -->
    <div class="app-container" id="appContainer">

        <!-- ==================== SIDEBAR ==================== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <div class="logo-icon">üìö</div>
                <span class="logo-text">Qu·∫£n L√Ω Trung T√¢m</span>
            </div>

            <nav class="sidebar-nav" id="sidebarNav">
                <!-- Menu s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS d·ª±a tr√™n quy·ªÅn -->
            </nav>

            <div class="sidebar-footer">
                <p class="version">VSHüì®2026</p>
            </div>
        </aside>

        <!-- ==================== MAIN WRAPPER ==================== -->
        <div class="main-wrapper">

            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="toggle-sidebar-btn" onclick="toggleSidebar()" title="·∫®n/Hi·ªán menu">‚ò∞</button>
                    <h1 class="page-title" id="pageTitle">üìä T·ªïng quan</h1>
                </div>
                <div class="header-right">
                    <button class="header-btn" onclick="createManualBackup()" title="Backup">üíæ</button>
                    <button class="header-btn" title="Th√¥ng b√°o">üîî</button>

                    <!-- User Dropdown -->
                    <div class="user-dropdown">
                        <div class="user-info" onclick="toggleUserMenu()">
                            <div class="user-avatar" id="userAvatar">A</div>
                            <span class="user-name" id="userName">Admin</span>
                            <span class="user-role" id="userRoleBadge">Admin</span>
                        </div>
                        <div class="user-menu" id="userMenu">
                            <div class="user-menu-header">
                                <div class="name" id="userMenuName">Admin</div>
                                <div class="email" id="userMenuRole">Qu·∫£n tr·ªã vi√™n</div>
                            </div>
                            <div class="user-menu-item" onclick="openChangePasswordModal()">
                                <span>üîë</span>
                                <span>ƒê·ªïi m·∫≠t kh·∫©u</span>
                            </div>
                            <div class="user-menu-item" onclick="openProfileModal()">
                                <span>üë§</span>
                                <span>Th√¥ng tin c√° nh√¢n</span>
                            </div>
                            <div class="user-menu-divider"></div>
                            <div class="user-menu-item danger" onclick="handleLogout()">
                                <span>üö™</span>
                                <span>ƒêƒÉng xu·∫•t</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content">

                <!-- ==================== TAB: T·ªîNG QUAN ==================== -->
                <div id="dashboard" class="tab-content active">
                    <div class="page-header">
                        <h2>üìä T·ªïng quan h·ªá th·ªëng</h2>
                    </div>
                    <div class="stats-grid" id="dashboardStats"></div>
                    <div class="d-flex gap-20 flex-wrap">
                        <div class="flex-1" style="min-width: 300px;">
                            <div class="chart-container">
                                <h3 class="mb-15">üìà Doanh thu 6 th√°ng g·∫ßn nh·∫•t</h3>
                                <div class="chart-bars" id="revenueChart"></div>
                            </div>
                        </div>
                        <div style="min-width: 300px; max-width: 400px;">
                            <div class="card">
                                <div class="card-header">
                                    <h3>üìÖ L·ªãch h·∫πn s·∫Øp t·ªõi</h3>
                                </div>
                                <div class="card-body" id="upcomingAppointments"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ==================== TAB: DANH S√ÅCH H·ªåC VI√äN ==================== -->
                <div id="students" class="tab-content">
                    <div class="page-header">
                        <h2>üë©‚Äçüéì Danh s√°ch H·ªçc vi√™n</h2>
                        <div class="page-actions" id="studentsActions">
                            <button class="btn btn-info" onclick="exportStudentsToExcel()">üì§ Export Excel</button>
                            <button class="btn btn-success" onclick="toggleStudentForm()">‚ûï Th√™m h·ªçc vi√™n</button>
                        </div>
                    </div>

                    <div class="form-section" id="studentFormSection">
                        <div class="form-section-header">
                            <h3 id="studentFormTitle">‚ûï Th√™m H·ªçc Vi√™n M·ªõi</h3>
                            <button class="btn btn-sm btn-secondary" onclick="toggleStudentForm()">‚úï ƒê√≥ng</button>
                        </div>
                        <form id="studentForm" onsubmit="saveStudent(event)">
                            <input type="hidden" id="editStudentId" value="">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>T√™n H·ªçc Vi√™n *</label>
                                    <input type="text" id="studentName" required="" placeholder="Nh·∫≠p t√™n h·ªçc vi√™n">
                                </div>
                                <div class="form-group">
                                    <label>Tu·ªïi *</label>
                                    <input type="number" id="studentAge" required="" min="3" max="100" placeholder="Nh·∫≠p tu·ªïi">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>T√™n Ph·ª• Huynh *</label>
                                    <input type="text" id="parentName" required="" placeholder="Nh·∫≠p t√™n ph·ª• huynh">
                                </div>
                                <div class="form-group">
                                    <label>S·ªë ƒêi·ªán Tho·∫°i *</label>
                                    <input type="tel" id="parentPhone" required="" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Email Ph·ª• Huynh</label>
                                    <input type="email" id="parentEmail" placeholder="Nh·∫≠p email (t√πy ch·ªçn)">
                                </div>
                                <div class="form-group">
                                    <label>Tr·∫°ng Th√°i *</label>
                                    <select id="studentStatus" required="">
                                        <option value="H·ªçc Th·ª≠">üÜï H·ªçc Th·ª≠</option>
                                        <option value="Ch·ªù ƒêƒÉng K√Ω">‚è≥ Ch·ªù ƒêƒÉng K√Ω</option>
                                        <option value="ƒê√£ ƒêƒÉng K√Ω">‚úÖ ƒê√£ ƒêƒÉng K√Ω</option>
                                        <option value="Ho√†n Th√†nh">üéì Ho√†n Th√†nh</option>
                                        <option value="Cancel">‚ùå Cancel</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>M√¥n H·ªçc Quan T√¢m *</label>
                                <div class="checkbox-group" id="subjectCheckboxes"></div>
                            </div>
                            <div class="form-group">
                                <label>Ghi Ch√∫</label>
                                <textarea id="studentNotes" rows="2" placeholder="Nh·∫≠p ghi ch√∫ (t√πy ch·ªçn)"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="saveStudentBtn">üíæ L∆∞u H·ªçc
                                    Vi√™n</button>
                                <button type="button" class="btn btn-secondary" onclick="toggleStudentForm()">‚ùå
                                    H·ªßy</button>
                            </div>
                        </form>
                    </div>

                    <div class="filter-bar">
                        <button class="filter-btn active" onclick="filterStudents('all')" data-filter="all">üìã T·∫•t c·∫£
                            <span class="count" id="countAll">0</span></button>
                        <button class="filter-btn" onclick="filterStudents('H·ªçc Th·ª≠')" data-filter="H·ªçc Th·ª≠">üÜï H·ªçc Th·ª≠
                            <span class="count" id="countHocThu">0</span></button>
                        <button class="filter-btn" onclick="filterStudents('Ch·ªù ƒêƒÉng K√Ω')" data-filter="Ch·ªù ƒêƒÉng K√Ω">‚è≥
                            Ch·ªù ƒêK <span class="count" id="countChoDangKy">0</span></button>
                        <button class="filter-btn" onclick="filterStudents('ƒê√£ ƒêƒÉng K√Ω')" data-filter="ƒê√£ ƒêƒÉng K√Ω">‚úÖ ƒê√£
                            ƒêK <span class="count" id="countDaDangKy">0</span></button>
                        <button class="filter-btn" onclick="filterStudents('Ho√†n Th√†nh')" data-filter="Ho√†n Th√†nh">üéì
                            Ho√†n Th√†nh <span class="count" id="countHoanThanh">0</span></button>
                        <button class="filter-btn" onclick="filterStudents('Cancel')" data-filter="Cancel">‚ùå Cancel
                            <span class="count" id="countCancel">0</span></button>
                        <div class="search-box">
                            <input type="text" id="searchStudent" placeholder="T√¨m ki·∫øm h·ªçc vi√™n..." oninput="searchStudents()">
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n HV</th>
                                    <th>Tu·ªïi</th>
                                    <th>Ph·ª• Huynh</th>
                                    <th>SƒêT</th>
                                    <th>M√¥n H·ªçc</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="studentsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="studentsPagination"></div>
                </div>

                <!-- ==================== TAB: H·ªåC TH·ª¨ ==================== -->
                <div id="trial" class="tab-content">
                    <div class="page-header">
                        <h2>üéì Danh s√°ch H·ªçc th·ª≠ &amp; Ch·ªù ƒëƒÉng k√Ω</h2>
                        <div class="page-actions"><button class="btn btn-info" onclick="exportTrialStudentsToExcel()">üì§
                                Export Excel</button></div>
                    </div>
                    <div class="filter-bar">
                        <button class="filter-btn active" onclick="filterTrialStudents('all')" data-filter="all">üìã T·∫•t
                            c·∫£ <span class="count" id="trialCountAll">0</span></button>
                        <button class="filter-btn" onclick="filterTrialStudents('H·ªçc Th·ª≠')" data-filter="H·ªçc Th·ª≠">üÜï H·ªçc
                            Th·ª≠ <span class="count" id="trialCountHocThu">0</span></button>
                        <button class="filter-btn" onclick="filterTrialStudents('Ch·ªù ƒêƒÉng K√Ω')" data-filter="Ch·ªù ƒêƒÉng K√Ω">‚è≥ Ch·ªù ƒêK <span class="count" id="trialCountChoDangKy">0</span></button>
                        <div class="search-box"><input type="text" id="searchTrialStudent" placeholder="T√¨m ki·∫øm..." oninput="searchTrialStudents()"></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n HV</th>
                                    <th>Tu·ªïi</th>
                                    <th>Ph·ª• Huynh</th>
                                    <th>SƒêT</th>
                                    <th>M√¥n H·ªçc</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>L·ªãch H·∫πn</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="trialStudentsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="trialPagination"></div>
                </div>

                <!-- ==================== TAB: L·ªäCH H·∫∏N ==================== -->
                <div id="appointments" class="tab-content">
                    <div class="page-header">
                        <h2>üìÖ Qu·∫£n l√Ω L·ªãch h·∫πn</h2>
                        <div class="page-actions" id="appointmentsActions">
                            <button class="btn btn-info" onclick="exportAppointmentsToExcel()">üì§ Export Excel</button>
                            <button class="btn btn-success" onclick="openNewAppointmentModal()">‚ûï Th√™m l·ªãch h·∫πn</button>
                        </div>
                    </div>
                    <div class="filter-bar">
                        <button class="filter-btn active" onclick="filterAppointments('all')">üìã T·∫•t c·∫£</button>
                        <button class="filter-btn" onclick="filterAppointments('upcoming')">‚è∞ S·∫Øp t·ªõi</button>
                        <button class="filter-btn" onclick="filterAppointments('past')">‚úÖ ƒê√£ qua</button>
                        <div class="search-box"><input type="text" id="searchAppointment" placeholder="T√¨m ki·∫øm l·ªãch h·∫πn..." oninput="searchAppointments()"></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>H·ªçc Vi√™n</th>
                                    <th>Ph·ª• Huynh</th>
                                    <th>SƒêT</th>
                                    <th>M√¥n H·ªçc</th>
                                    <th>Ng√†y</th>
                                    <th>Gi·ªù</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="appointmentsPagination"></div>
                </div>

                <!-- ==================== TAB: PHI·∫æU ƒêƒÇNG K√ù ==================== -->
                <div id="registrations" class="tab-content">
                    <div class="page-header">
                        <h2>üìã Qu·∫£n l√Ω Phi·∫øu ƒëƒÉng k√Ω</h2>
                        <div class="page-actions" id="registrationsActions">
                            <button class="btn btn-info" onclick="exportRegistrationsToExcel()">üì§ Export Excel</button>
                            <button class="btn btn-success" onclick="openNewRegistrationModal()">‚ûï T·∫°o phi·∫øu ƒêK</button>
                        </div>
                    </div>
                    <div class="filter-bar">
                        <div class="search-box"><input type="text" id="searchRegistration" placeholder="T√¨m ki·∫øm phi·∫øu ƒëƒÉng k√Ω..." oninput="searchRegistrations()"></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>M√£ Phi·∫øu</th>
                                    <th>H·ªçc Vi√™n</th>
                                    <th>M√¥n H·ªçc / G√≥i</th>
                                    <th>Gi·∫£m Gi√°</th>
                                    <th>Th√†nh Ti·ªÅn</th>
                                    <th>Ng√†y ƒêK</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="registrationsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="registrationsPagination"></div>
                </div>

                <!-- ==================== TAB: BI√äN LAI ==================== -->
                <div id="receipts" class="tab-content">
                    <div class="page-header">
                        <h2>üßæ Qu·∫£n l√Ω Bi√™n lai</h2>
                        <div class="page-actions" id="receiptsActions">
                            <button class="btn btn-info" onclick="exportReceiptsToExcel()">üì§ Export Excel</button>
                            <button class="btn btn-success" onclick="openReceiptModal()">‚ûï T·∫°o bi√™n lai</button>
                        </div>
                    </div>
                    <!-- T·ªïng h·ª£p bi√™n lai -->
                    <div class="stats-grid mb-20" id="receiptSummaryStats">
                        <div class="stat-card">
                            <div class="stat-icon green">üí∞</div>
                            <div class="stat-info">
                                <h3 id="receiptTotalIncome">0</h3>
                                <p>T·ªïng thu</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon red">üí∏</div>
                            <div class="stat-info">
                                <h3 id="receiptTotalExpense">0</h3>
                                <p>T·ªïng chi (ho√†n ti·ªÅn)</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue">üìä</div>
                            <div class="stat-info">
                                <h3 id="receiptBalance">0</h3>
                                <p>S·ªë d∆∞</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon teal">üßæ</div>
                            <div class="stat-info">
                                <h3 id="receiptTotalCount">0</h3>
                                <p>T·ªïng bi√™n lai</p>
                            </div>
                        </div>
                    </div>

                    <!-- B·ªô l·ªçc th·ªùi gian -->
                    <div class="card mb-20">
                        <div class="card-body" style="padding: 15px;">
                            <div class="d-flex gap-15 flex-wrap align-center">
                                <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                                    <label style="font-size: 12px; margin-bottom: 4px;">Kho·∫£ng th·ªùi gian</label>
                                    <select id="receiptPeriodFilter" onchange="onReceiptPeriodChange()">
                                        <option value="all">T·∫•t c·∫£</option>
                                        <option value="thisMonth" selected="">Th√°ng n√†y</option>
                                        <option value="lastMonth">Th√°ng tr∆∞·ªõc</option>
                                        <option value="thisQuarter">Qu√Ω n√†y</option>
                                        <option value="thisYear">NƒÉm nay</option>
                                        <option value="custom">T√πy ch·ªçn</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0;" id="receiptFromDateGroup">
                                    <label style="font-size: 12px; margin-bottom: 4px;">T·ª´ ng√†y</label>
                                    <input type="date" id="receiptFilterFromDate" onchange="filterReceiptsByDate()">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;" id="receiptToDateGroup">
                                    <label style="font-size: 12px; margin-bottom: 4px;">ƒê·∫øn ng√†y</label>
                                    <input type="date" id="receiptFilterToDate" onchange="filterReceiptsByDate()">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label style="font-size: 12px; margin-bottom: 4px;">Lo·∫°i</label>
                                    <select id="receiptTypeFilter" onchange="filterReceiptsByDate()">
                                        <option value="all">T·∫•t c·∫£ lo·∫°i</option>
                                        <option value="thu">Ch·ªâ Thu</option>
                                        <option value="chi">Ch·ªâ Chi (Ho√†n ti·ªÅn)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="filter-bar">
                        <div class="search-box"><input type="text" id="searchReceipt" placeholder="T√¨m ki·∫øm bi√™n lai..." oninput="searchReceipts()"></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>M√£ BL</th>
                                    <th>Lo·∫°i</th>
                                    <th>H·ªçc Vi√™n</th>
                                    <th>N·ªôi Dung</th>
                                    <th>S·ªë Ti·ªÅn</th>
                                    <th>Ng√†y</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="receiptsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="receiptsPagination"></div>
                </div>

                <!-- ==================== TAB: C√îNG N·ª¢ ==================== -->
                <div id="debts" class="tab-content">
                    <div class="page-header">
                        <h2>üí≥ Qu·∫£n l√Ω C√¥ng n·ª£</h2>
                        <div class="page-actions">
                            <button class="btn btn-info" onclick="exportDebtsToExcel()">üì§ Export Excel</button>
                        </div>
                    </div>

                    <!-- Th·ªëng k√™ c√¥ng n·ª£ -->
                    <div class="stats-grid mb-20">
                        <div class="stat-card">
                            <div class="stat-icon green">üí∞</div>
                            <div class="stat-info">
                                <h3 id="debtTotalAmount">0</h3>
                                <p>T·ªïng ph·∫£i thu</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue">‚úÖ</div>
                            <div class="stat-info">
                                <h3 id="debtPaidAmount">0</h3>
                                <p>ƒê√£ thu</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon red">‚ö†Ô∏è</div>
                            <div class="stat-info">
                                <h3 id="debtRemainingAmount">0</h3>
                                <p>C√≤n n·ª£</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon orange">üìã</div>
                            <div class="stat-info">
                                <h3 id="debtStudentCount">0</h3>
                                <p>HV c√≤n n·ª£</p>
                            </div>
                        </div>
                    </div>

                    <!-- C·∫£nh b√°o -->
                    <div class="card mb-20" id="debtWarningsCard">
                        <div class="card-header">
                            <h3>‚ö†Ô∏è C·∫£nh b√°o c·∫ßn x·ª≠ l√Ω</h3>
                            <button class="btn btn-sm btn-outline" onclick="refreshDebtWarnings()">üîÑ L√†m m·ªõi</button>
                        </div>
                        <div class="card-body" id="debtWarningsList">
                            <p class="text-muted">ƒêang t·∫£i...</p>
                        </div>
                    </div>

                    <!-- B·ªô l·ªçc -->
                    <div class="filter-bar">
                        <button class="filter-btn active" onclick="filterDebts('all')" data-filter="all">üìã T·∫•t
                            c·∫£</button>
                        <button class="filter-btn" onclick="filterDebts('unpaid')" data-filter="unpaid">üî¥ Ch∆∞a
                            ƒë√≥ng</button>
                        <button class="filter-btn" onclick="filterDebts('partial')" data-filter="partial">üü° ƒê√≥ng 1
                            ph·∫ßn</button>
                        <button class="filter-btn" onclick="filterDebts('paid')" data-filter="paid">üü¢ ƒê√£ ƒë√≥ng
                            ƒë·ªß</button>
                        <button class="filter-btn" onclick="filterDebts('warning')" data-filter="warning">‚ö†Ô∏è C·∫ßn nh·∫Øc
                            nh·ªü</button>
                        <div class="search-box">
                            <input type="text" id="searchDebt" placeholder="T√¨m ki·∫øm..." oninput="searchDebts()">
                        </div>
                    </div>

                    <!-- B·∫£ng c√¥ng n·ª£ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>H·ªçc vi√™n</th>
                                    <th>M√£ Phi·∫øu ƒêK</th>
                                    <th>M√¥n h·ªçc</th>
                                    <th>T·ªïng ti·ªÅn</th>
                                    <th>ƒê√£ ƒë√≥ng</th>
                                    <th>C√≤n n·ª£</th>
                                    <th>C√≤n bu·ªïi</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="debtsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="debtsPagination"></div>
                </div>

                <!-- ==================== TAB: GI√ÅO VI√äN ==================== -->
                <div id="teachers" class="tab-content">
                    <div class="page-header">
                        <h2>üë®‚Äçüè´ Qu·∫£n l√Ω Gi√°o vi√™n</h2>
                        <div class="page-actions" id="teachersActions">
                            <button class="btn btn-success" onclick="openTeacherModal()">‚ûï Th√™m gi√°o vi√™n</button>
                        </div>
                    </div>

                    <div class="filter-bar">
                        <div class="search-box">
                            <input type="text" id="searchTeacher" placeholder="T√¨m ki·∫øm gi√°o vi√™n..." oninput="searchTeachers()">
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>H·ªç t√™n</th>
                                    <th>S·ªë ƒëi·ªán tho·∫°i</th>
                                    <th>M√¥n d·∫°y</th>
                                    <th>Lo·∫°i l∆∞∆°ng</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="teachersTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="teachersPagination"></div>
                </div>

                <!-- ==================== TAB: L·ªöP H·ªåC ==================== -->
                <div id="classes" class="tab-content">
                    <div class="page-header">
                        <h2>üìö Qu·∫£n l√Ω L·ªõp h·ªçc</h2>
                        <div class="page-actions" id="classesActions">
                            <button class="btn btn-success" onclick="openClassModal()">‚ûï Th√™m l·ªõp m·ªõi</button>
                        </div>
                    </div>

                    <div class="filter-bar">
                        <select id="filterClassSubject" onchange="filterClasses()">
                            <option value="">üìñ T·∫•t c·∫£ m√¥n h·ªçc</option>
                        </select>
                        <select id="filterClassTeacher" onchange="filterClasses()">
                            <option value="">üë®‚Äçüè´ T·∫•t c·∫£ gi√°o vi√™n</option>
                        </select>
                        <select id="filterClassStatus" onchange="filterClasses()">
                            <option value="">üìä T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="new">üÜï L·ªõp m·ªõi</option>
                            <option value="active">üü¢ ƒêang h·ªçc</option>
                            <option value="completed">‚úÖ Ho√†n th√†nh</option>
                            <option value="cancelled">‚ùå ƒê√£ h·ªßy</option>
                        </select>
                        <div class="search-box">
                            <input type="text" id="searchClass" placeholder="T√¨m ki·∫øm l·ªõp h·ªçc..." oninput="searchClasses()">
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n l·ªõp</th>
                                    <th>M√¥n h·ªçc</th>
                                    <th>Gi√°o vi√™n</th>
                                    <th>Lo·∫°i</th>
                                    <th>Sƒ© s·ªë</th>
                                    <th>L·ªãch h·ªçc</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="classesTableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="classesPagination"></div>
                </div>

                <!-- ==================== TAB: ƒêI·ªÇM DANH ==================== -->
                <div id="attendance" class="tab-content">
                    <div class="page-header">
                        <h2>‚úÖ ƒêi·ªÉm danh</h2>
                        <div class="page-actions">
                            <button class="btn btn-info" onclick="exportAttendanceToExcel()">üì§ Export Excel</button>
                        </div>
                    </div>

                    <!-- B·ªô ch·ªçn ƒëi·ªÉm danh -->
                    <div class="card mb-20">
                        <div class="card-body">
                            <div class="d-flex gap-15 flex-wrap align-center">
                                <div class="form-group" style="margin-bottom: 0; min-width: 200px;">
                                    <label style="font-size: 12px; margin-bottom: 4px;">Ch·ªçn l·ªõp *</label>
                                    <select id="attendanceClassSelect" onchange="onAttendanceClassChange()">
                                        <option value="">-- Ch·ªçn l·ªõp h·ªçc --</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                                    <label style="font-size: 12px; margin-bottom: 4px;">Ng√†y ƒëi·ªÉm danh *</label>
                                    <input type="date" id="attendanceDate" onchange="onAttendanceDateChange()">
                                </div>
                                <div class="form-group" style="margin-bottom: 0; min-width: 180px;">
                                    <label style="font-size: 12px; margin-bottom: 4px;">Ca h·ªçc *</label>
                                    <select id="attendanceScheduleSelect" onchange="loadAttendanceList()">
                                        <option value="">-- Ch·ªçn ca h·ªçc --</option>
                                    </select>
                                </div>
                                <div style="padding-top: 18px;">
                                    <button class="btn btn-primary" onclick="loadAttendanceList()">üîÑ T·∫£i danh
                                        s√°ch</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- L·ªãch h·ªçc h√¥m nay -->
                    <div class="card mb-20" id="todaySchedulesCard">
                        <div class="card-header">
                            <h3>üìÖ L·ªãch h·ªçc h√¥m nay</h3>
                            <button class="btn btn-sm btn-outline" onclick="refreshTodaySchedules()">üîÑ L√†m m·ªõi</button>
                        </div>
                        <div class="card-body" id="todaySchedulesList">
                            <p class="text-muted">ƒêang t·∫£i...</p>
                        </div>
                    </div>

                    <!-- B·∫£ng ƒëi·ªÉm danh -->
                    <div class="card" id="attendanceTableCard" style="display: none;">
                        <div class="card-header">
                            <h3 id="attendanceTableTitle">üìã ƒêi·ªÉm danh</h3>
                            <div class="d-flex gap-10">
                                <button class="btn btn-sm btn-success" onclick="markAllPresent()">‚úÖ T·∫•t c·∫£ C√≥
                                    m·∫∑t</button>
                                <button class="btn btn-sm btn-primary" onclick="saveAttendance()">üíæ L∆∞u ƒëi·ªÉm
                                    danh</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-container" style="box-shadow: none; border: none;">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>H·ªçc vi√™n</th>
                                            <th>T·ªïng bu·ªïi</th>
                                            <th>ƒê√£ h·ªçc</th>
                                            <th>C√≤n l·∫°i</th>
                                            <th style="min-width: 280px;">Tr·∫°ng th√°i ƒëi·ªÉm danh</th>
                                            <th>Ghi ch√∫</th>
                                        </tr>
                                    </thead>
                                    <tbody id="attendanceTableBody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- L·ªãch s·ª≠ ƒëi·ªÉm danh -->
                    <div class="card mt-20">
                        <div class="card-header">
                            <h3>üìú L·ªãch s·ª≠ ƒëi·ªÉm danh g·∫ßn ƒë√¢y</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-container" style="box-shadow: none; border: none;">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Ng√†y</th>
                                            <th>L·ªõp</th>
                                            <th>Ca h·ªçc</th>
                                            <th>Sƒ© s·ªë</th>
                                            <th>C√≥ m·∫∑t</th>
                                            <th>V·∫Øng</th>
                                            <th>Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="attendanceHistoryBody"></tbody>
                                </table>
                            </div>
                            <div class="pagination-container" id="attendanceHistoryPagination"></div>
                        </div>
                    </div>
                    <!-- Th·ªëng k√™ ƒëi·ªÉm danh theo h·ªçc vi√™n -->
                    <div class="card mt-20">
                        <div class="card-header">
                            <h3>üìä Th·ªëng k√™ theo H·ªçc vi√™n</h3>
                            <div class="d-flex gap-10">
                                <select id="attendanceStatClassFilter" onchange="loadAttendanceStatsByStudent()" style="padding: 6px 12px; border: 1px solid var(--border-color); border-radius: 6px;">
                                    <option value="">T·∫•t c·∫£ l·ªõp</option>
                                </select>
                                <select id="attendanceStatPeriodFilter" onchange="onAttendanceStatPeriodChange()" style="padding: 6px 12px; border: 1px solid var(--border-color); border-radius: 6px;">
                                    <option value="thisMonth">Th√°ng n√†y</option>
                                    <option value="lastMonth">Th√°ng tr∆∞·ªõc</option>
                                    <option value="thisQuarter">Qu√Ω n√†y</option>
                                    <option value="all">T·∫•t c·∫£</option>
                                </select>
                                <button class="btn btn-sm btn-info" onclick="exportAttendanceStatsByStudent()">üì§
                                    Export</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-container" style="box-shadow: none; border: none;">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>H·ªçc vi√™n</th>
                                            <th>L·ªõp</th>
                                            <th>T·ªïng bu·ªïi ƒêD</th>
                                            <th>‚úÖ C√≥ m·∫∑t</th>
                                            <th>üü° Mu·ªôn</th>
                                            <th>‚ùå V·∫Øng KP</th>
                                            <th>üìù C√≥ ph√©p</th>
                                            <th>T·ª∑ l·ªá CM</th>
                                            <th>Chi ti·∫øt</th>
                                        </tr>
                                    </thead>
                                    <tbody id="attendanceStatsByStudentBody">
                                        <tr>
                                            <td colspan="9" class="text-center text-muted">ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="pagination-container" id="attendanceStatsPagination"></div>
                        </div>
                    </div>

                </div>

                <!-- ==================== TAB: H·ªåC B√ô ==================== -->
                <div id="makeup" class="tab-content">
                    <div class="page-header">
                        <h2>üìù Qu·∫£n l√Ω H·ªçc b√π</h2>
                        <div class="page-actions">
                            <button class="btn btn-success" onclick="openCreateMakeupModal()">‚ûï T·∫°o y√™u c·∫ßu h·ªçc
                                b√π</button>
                        </div>
                    </div>

                    <!-- Th·ªëng k√™ -->
                    <div class="stats-grid mb-20">
                        <div class="stat-card">
                            <div class="stat-icon orange">‚è≥</div>
                            <div class="stat-info">
                                <h3 id="makeupPendingCount">0</h3>
                                <p>Ch·ªù x·∫øp l·ªãch</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue">üìÖ</div>
                            <div class="stat-info">
                                <h3 id="makeupApprovedCount">0</h3>
                                <p>ƒê√£ x·∫øp l·ªãch</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon red">‚ö†Ô∏è</div>
                            <div class="stat-info">
                                <h3 id="makeupExpiringCount">0</h3>
                                <p>S·∫Øp h·∫øt h·∫°n (‚â§7 ng√†y)</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green">‚úÖ</div>
                            <div class="stat-info">
                                <h3 id="makeupCompletedCount">0</h3>
                                <p>ƒê√£ ho√†n th√†nh</p>
                            </div>
                        </div>
                    </div>

                    <!-- B·ªô l·ªçc -->
                    <div class="filter-bar">
                        <button class="filter-btn active" onclick="filterMakeupRequests('all')" data-filter="all">üìã T·∫•t
                            c·∫£</button>
                        <button class="filter-btn" onclick="filterMakeupRequests('pending')" data-filter="pending">‚è≥ Ch·ªù
                            x·∫øp l·ªãch</button>
                        <button class="filter-btn" onclick="filterMakeupRequests('approved')" data-filter="approved">üìÖ
                            ƒê√£ x·∫øp l·ªãch</button>
                        <button class="filter-btn" onclick="filterMakeupRequests('expiring')" data-filter="expiring">‚ö†Ô∏è
                            S·∫Øp h·∫øt h·∫°n</button>
                        <button class="filter-btn" onclick="filterMakeupRequests('completed')" data-filter="completed">‚úÖ
                            Ho√†n th√†nh</button>
                        <button class="filter-btn" onclick="filterMakeupRequests('expired')" data-filter="expired">‚ùå ƒê√£
                            h·∫øt h·∫°n</button>
                    </div>

                    <!-- B·∫£ng y√™u c·∫ßu h·ªçc b√π -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>H·ªçc vi√™n</th>
                                    <th>L·ªõp g·ªëc</th>
                                    <th>Ng√†y ngh·ªâ</th>
                                    <th>H·∫°n h·ªçc b√π</th>
                                    <th>L·ªõp h·ªçc b√π</th>
                                    <th>Ng√†y h·ªçc b√π</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="makeupRequestsBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination-container" id="makeupPagination"></div>
                </div>

                <!-- ==================== TAB: M√îN H·ªåC ==================== -->
                <div id="subjects" class="tab-content">
                    <div class="page-header">
                        <h2>üìñ Danh m·ª•c M√¥n h·ªçc</h2>
                        <div class="page-actions" id="subjectsActions"><button class="btn btn-success" onclick="openSubjectModal()">‚ûï Th√™m m√¥n h·ªçc</button></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Icon</th>
                                    <th>T√™n M√¥n</th>
                                    <th>H·ªçc Ph√≠ M·∫∑c ƒê·ªãnh</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="subjectsTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ==================== TAB: G√ìI H·ªåC PH√ç ==================== -->
                <div id="packages" class="tab-content">
                    <div class="page-header">
                        <h2>üì¶ Danh m·ª•c G√≥i h·ªçc ph√≠</h2>
                        <div class="page-actions" id="packagesActions"><button class="btn btn-success" onclick="openPackageModal()">‚ûï Th√™m g√≥i</button></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n G√≥i</th>
                                    <th>M√¥n H·ªçc</th>
                                    <th>S·ªë Bu·ªïi</th>
                                    <th>H·ªçc Ph√≠</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="packagesTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ==================== TAB: KHUY·∫æN M√ÉI ==================== -->
                <div id="promotions" class="tab-content">
                    <div class="page-header">
                        <h2>üéÅ Danh m·ª•c Khuy·∫øn m√£i</h2>
                        <div class="page-actions" id="promotionsActions"><button class="btn btn-success" onclick="openPromotionModal()">‚ûï Th√™m KM</button></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n KM</th>
                                    <th>Lo·∫°i</th>
                                    <th>Gi√° Tr·ªã</th>
                                    <th>Th·ªùi H·∫°n</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="promotionsTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ==================== TAB: PH√íNG H·ªåC ==================== -->
                <div id="rooms" class="tab-content">
                    <div class="page-header">
                        <h2>üè´ Qu·∫£n l√Ω Ph√≤ng h·ªçc</h2>
                        <div class="page-actions" id="roomsActions">
                            <button class="btn btn-success" onclick="openRoomModal()">‚ûï Th√™m ph√≤ng</button>
                        </div>
                    </div>

                    <!-- Th·ªëng k√™ nhanh -->
                    <div class="stats-grid mb-20">
                        <div class="stat-card">
                            <div class="stat-icon teal">üè´</div>
                            <div class="stat-info">
                                <h3 id="roomTotalCount">0</h3>
                                <p>T·ªïng ph√≤ng</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green">‚úÖ</div>
                            <div class="stat-info">
                                <h3 id="roomActiveCount">0</h3>
                                <p>ƒêang ho·∫°t ƒë·ªông</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon orange">üîß</div>
                            <div class="stat-info">
                                <h3 id="roomMaintenanceCount">0</h3>
                                <p>ƒêang b·∫£o tr√¨</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue">üë•</div>
                            <div class="stat-info">
                                <h3 id="roomTotalCapacity">0</h3>
                                <p>T·ªïng s·ª©c ch·ª©a</p>
                            </div>
                        </div>
                    </div>

                    <!-- B·∫£ng danh s√°ch ph√≤ng -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n ph√≤ng</th>
                                    <th>S·ª©c ch·ª©a</th>
                                    <th>Trang thi·∫øt b·ªã</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Ghi ch√∫</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="roomsTableBody"></tbody>
                        </table>
                    </div>

                    <!-- L·ªãch s·ª≠ d·ª•ng ph√≤ng h√¥m nay -->
                    <div class="card mt-20">
                        <div class="card-header">
                            <h3>üìÖ L·ªãch s·ª≠ d·ª•ng ph√≤ng h√¥m nay</h3>
                            <button class="btn btn-sm btn-outline" onclick="refreshRoomScheduleToday()">üîÑ L√†m
                                m·ªõi</button>
                        </div>
                        <div class="card-body" id="roomScheduleToday">
                            <p class="text-muted">ƒêang t·∫£i...</p>
                        </div>
                    </div>
                </div>

                <!-- ==================== TAB: B√ÅO C√ÅO ==================== -->
                <div id="reports" class="tab-content">
                    <div class="page-header">
                        <h2>üìà B√°o c√°o th·ªëng k√™</h2>
                        <div class="page-actions">
                            <button class="btn btn-info" onclick="exportReportToExcel()">üì§ Export Excel</button>
                            <button class="btn btn-primary" onclick="refreshReports()">üîÑ L√†m m·ªõi</button>
                        </div>
                    </div>

                    <!-- B·ªô ch·ªçn th·ªùi gian -->
                    <div class="card mb-20">
                        <div class="card-body">
                            <div class="d-flex gap-15 flex-wrap align-center">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label style="font-size: 12px; margin-bottom: 4px;">Kho·∫£ng th·ªùi gian</label>
                                    <select id="reportPeriodType" onchange="onReportPeriodChange()">
                                        <option value="thisMonth">Th√°ng n√†y</option>
                                        <option value="lastMonth">Th√°ng tr∆∞·ªõc</option>
                                        <option value="thisQuarter">Qu√Ω n√†y</option>
                                        <option value="thisYear">NƒÉm nay</option>
                                        <option value="custom">T√πy ch·ªçn</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0;" id="reportFromDateGroup">
                                    <label style="font-size: 12px; margin-bottom: 4px;">T·ª´ ng√†y</label>
                                    <input type="date" id="reportFromDate" onchange="loadReportData()">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;" id="reportToDateGroup">
                                    <label style="font-size: 12px; margin-bottom: 4px;">ƒê·∫øn ng√†y</label>
                                    <input type="date" id="reportToDate" onchange="loadReportData()">
                                </div>
                                <div style="padding-top: 18px;">
                                    <button class="btn btn-success" onclick="loadReportData()">üìä Xem b√°o c√°o</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab b√°o c√°o con -->
                    <div class="card">
                        <div class="card-header" style="border-bottom: none; padding-bottom: 0;">
                            <div class="report-tabs">
                                <button class="report-tab active" onclick="switchReportTab('revenue')" data-tab="revenue">üí∞ Doanh thu</button>
                                <button class="report-tab" onclick="switchReportTab('students')" data-tab="students">üë©‚Äçüéì H·ªçc vi√™n</button>
                                <button class="report-tab" onclick="switchReportTab('attendance')" data-tab="attendance">‚úÖ ƒêi·ªÉm danh</button>
                                <button class="report-tab" onclick="switchReportTab('debt')" data-tab="debt">üí≥ C√¥ng
                                    n·ª£</button>
                            </div>
                        </div>

                        <!-- N·ªôi dung b√°o c√°o Doanh thu -->
                        <div class="card-body report-content" id="reportRevenue">
                            <div class="stats-grid mb-20">
                                <div class="stat-card">
                                    <div class="stat-icon green">üí∞</div>
                                    <div class="stat-info">
                                        <h3 id="revenueTotalAmount">0</h3>
                                        <p>T·ªïng doanh thu</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon blue">üßæ</div>
                                    <div class="stat-info">
                                        <h3 id="revenueReceiptCount">0</h3>
                                        <p>S·ªë bi√™n lai</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon orange">üìà</div>
                                    <div class="stat-info">
                                        <h3 id="revenueAvgAmount">0</h3>
                                        <p>Trung b√¨nh/bi√™n lai</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon purple">üìã</div>
                                    <div class="stat-info">
                                        <h3 id="revenueRegCount">0</h3>
                                        <p>Phi·∫øu ƒêK m·ªõi</p>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex gap-20 flex-wrap">
                                <div class="flex-1" style="min-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üìä Doanh thu theo th·ªùi gian</h4>
                                        <div id="revenueChartLoading" class="text-center text-muted p-20">ƒêang t·∫£i bi·ªÉu
                                            ƒë·ªì...</div>
                                        <canvas id="revenueTimeChart" style="display: none;"></canvas>
                                        <div id="revenueTimeTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                                <div style="min-width: 300px; max-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üéØ Doanh thu theo m√¥n h·ªçc</h4>
                                        <div id="revenueSubjectLoading" class="text-center text-muted p-20">ƒêang t·∫£i
                                            bi·ªÉu ƒë·ªì...</div>
                                        <canvas id="revenueSubjectChart" style="display: none;"></canvas>
                                        <div id="revenueSubjectTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- N·ªôi dung b√°o c√°o H·ªçc vi√™n -->
                        <div class="card-body report-content" id="reportStudents" style="display: none;">
                            <div class="stats-grid mb-20">
                                <div class="stat-card">
                                    <div class="stat-icon teal">üë•</div>
                                    <div class="stat-info">
                                        <h3 id="studentTotalCount">0</h3>
                                        <p>T·ªïng h·ªçc vi√™n</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon green">üÜï</div>
                                    <div class="stat-info">
                                        <h3 id="studentNewCount">0</h3>
                                        <p>HV m·ªõi trong k·ª≥</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon blue">üìö</div>
                                    <div class="stat-info">
                                        <h3 id="studentActiveCount">0</h3>
                                        <p>ƒêang h·ªçc</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon purple">üéì</div>
                                    <div class="stat-info">
                                        <h3 id="studentCompletedCount">0</h3>
                                        <p>Ho√†n th√†nh</p>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex gap-20 flex-wrap">
                                <div class="flex-1" style="min-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üìä H·ªçc vi√™n m·ªõi theo th√°ng</h4>
                                        <div id="studentChartLoading" class="text-center text-muted p-20">ƒêang t·∫£i bi·ªÉu
                                            ƒë·ªì...</div>
                                        <canvas id="studentTimeChart" style="display: none;"></canvas>
                                        <div id="studentTimeTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                                <div style="min-width: 300px; max-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üéØ Ph√¢n b·ªï theo tr·∫°ng th√°i</h4>
                                        <div id="studentStatusLoading" class="text-center text-muted p-20">ƒêang t·∫£i bi·ªÉu
                                            ƒë·ªì...</div>
                                        <canvas id="studentStatusChart" style="display: none;"></canvas>
                                        <div id="studentStatusTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- N·ªôi dung b√°o c√°o ƒêi·ªÉm danh -->
                        <div class="card-body report-content" id="reportAttendance" style="display: none;">
                            <div class="stats-grid mb-20">
                                <div class="stat-card">
                                    <div class="stat-icon teal">üìã</div>
                                    <div class="stat-info">
                                        <h3 id="attendanceTotalCount">0</h3>
                                        <p>T·ªïng l∆∞·ª£t ƒëi·ªÉm danh</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon green">‚úÖ</div>
                                    <div class="stat-info">
                                        <h3 id="attendancePresentRate">0%</h3>
                                        <p>T·ª∑ l·ªá c√≥ m·∫∑t</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon red">‚ùå</div>
                                    <div class="stat-info">
                                        <h3 id="attendanceAbsentCount">0</h3>
                                        <p>L∆∞·ª£t v·∫Øng</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon orange">üìù</div>
                                    <div class="stat-info">
                                        <h3 id="attendanceMakeupCount">0</h3>
                                        <p>L∆∞·ª£t h·ªçc b√π</p>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex gap-20 flex-wrap">
                                <div class="flex-1" style="min-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üìä ƒêi·ªÉm danh theo ng√†y</h4>
                                        <div id="attendanceChartLoading" class="text-center text-muted p-20">ƒêang t·∫£i
                                            bi·ªÉu ƒë·ªì...</div>
                                        <canvas id="attendanceTimeChart" style="display: none;"></canvas>
                                        <div id="attendanceTimeTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                                <div style="min-width: 300px; max-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üéØ T·ª∑ l·ªá ƒëi·ªÉm danh</h4>
                                        <div id="attendanceRateLoading" class="text-center text-muted p-20">ƒêang t·∫£i
                                            bi·ªÉu ƒë·ªì...</div>
                                        <canvas id="attendanceRateChart" style="display: none;"></canvas>
                                        <div id="attendanceRateTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- N·ªôi dung b√°o c√°o C√¥ng n·ª£ -->
                        <div class="card-body report-content" id="reportDebt" style="display: none;">
                            <div class="stats-grid mb-20">
                                <div class="stat-card">
                                    <div class="stat-icon green">üí∞</div>
                                    <div class="stat-info">
                                        <h3 id="debtReportTotal">0</h3>
                                        <p>T·ªïng ph·∫£i thu</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon blue">‚úÖ</div>
                                    <div class="stat-info">
                                        <h3 id="debtReportPaid">0</h3>
                                        <p>ƒê√£ thu trong k·ª≥</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon red">‚ö†Ô∏è</div>
                                    <div class="stat-info">
                                        <h3 id="debtReportRemaining">0</h3>
                                        <p>C√≤n n·ª£</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon orange">üìà</div>
                                    <div class="stat-info">
                                        <h3 id="debtReportRate">0%</h3>
                                        <p>T·ª∑ l·ªá thu</p>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex gap-20 flex-wrap">
                                <div class="flex-1" style="min-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üìä Thu ti·ªÅn theo th·ªùi gian</h4>
                                        <div id="debtChartLoading" class="text-center text-muted p-20">ƒêang t·∫£i bi·ªÉu
                                            ƒë·ªì...</div>
                                        <canvas id="debtTimeChart" style="display: none;"></canvas>
                                        <div id="debtTimeTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                                <div style="min-width: 300px; max-width: 400px;">
                                    <div class="chart-container" style="background: var(--bg-white); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color);">
                                        <h4 style="margin-bottom: 15px;">üéØ T√¨nh tr·∫°ng c√¥ng n·ª£</h4>
                                        <div id="debtStatusLoading" class="text-center text-muted p-20">ƒêang t·∫£i bi·ªÉu
                                            ƒë·ªì...</div>
                                        <canvas id="debtStatusChart" style="display: none;"></canvas>
                                        <div id="debtStatusTable" style="display: none; margin-top: 15px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ==================== TAB: XU·∫§T/NH·∫¨P DATA ==================== -->
                <div id="export" class="tab-content">
                    <div class="page-header">
                        <h2>üì§ Xu·∫•t/Nh·∫≠p d·ªØ li·ªáu &amp; Sao l∆∞u</h2>
                    </div>
                    <div class="settings-group">
                        <h3>üìä Xu·∫•t File Excel</h3>
                        <div class="d-flex gap-10 flex-wrap">
                            <button class="btn btn-success" onclick="exportAllToExcel()">üìä Xu·∫•t T·∫•t C·∫£</button>
                            <button class="btn btn-info" onclick="exportStudentsToExcel()">üë©‚Äçüéì H·ªçc Vi√™n</button>
                            <button class="btn btn-warning" onclick="exportAppointmentsToExcel()">üìÖ L·ªãch H·∫πn</button>
                            <button class="btn btn-primary" onclick="exportRegistrationsToExcel()">üìã Phi·∫øu ƒêK</button>
                            <button class="btn btn-secondary" onclick="exportReceiptsToExcel()">üßæ Bi√™n Lai</button>
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>üíæ Sao L∆∞u &amp; Kh√¥i Ph·ª•c</h3>
                        <div class="d-flex gap-10 flex-wrap">
                            <button class="btn btn-success" onclick="exportBackupJSON()">üíæ T·∫£i Backup JSON</button>
                            <label class="btn btn-info" style="cursor: pointer;">üìÅ Kh√¥i Ph·ª•c JSON<input type="file" accept=".json" onchange="restoreFromJSON(event)" style="display: none;"></label>
                            <label class="btn btn-warning" style="cursor: pointer;">üì• Import Excel<input type="file" accept=".xlsx,.xls" onchange="importFromExcel(event)" style="display: none;"></label>
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>üìú L·ªãch S·ª≠ Backup T·ª± ƒê·ªông</h3>
                        <div id="backupHistoryList"></div>
                    </div>
                </div>

                <!-- ==================== TAB: T√ÄI KHO·∫¢N ==================== -->
                <div id="users" class="tab-content">
                    <div class="page-header">
                        <h2>üîê Qu·∫£n l√Ω T√†i kho·∫£n</h2>
                        <div class="page-actions"><button class="btn btn-success" onclick="openUserModal()">‚ûï Th√™m t√†i
                                kho·∫£n</button></div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>H·ªç t√™n</th>
                                    <th>Vai tr√≤</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>ƒêƒÉng nh·∫≠p cu·ªëi</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody"></tbody>
                        </table>
                    </div>

                    <!-- Ph√¢n quy·ªÅn ƒë·ªông -->
                    <div class="card mt-20">
                        <div class="card-header">
                            <h3>‚öôÔ∏è Ph√¢n quy·ªÅn theo vai tr√≤</h3>
                            <select id="permissionRoleSelect" onchange="loadPermissionsForRole()">
                                <option value="admin">Admin</option>
                                <option value="manager">Manager</option>
                                <option value="user">User</option>
                            </select>
                        </div>
                        <div class="card-body">
                            <div class="permission-matrix" id="permissionMatrix">
                                <!-- Render b·∫±ng JS -->
                            </div>
                            <div class="form-actions mt-15">
                                <button class="btn btn-primary" onclick="savePermissions()">üíæ L∆∞u ph√¢n quy·ªÅn</button>
                                <button class="btn btn-secondary" onclick="resetPermissions()">üîÑ Reset m·∫∑c
                                    ƒë·ªãnh</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ==================== TAB: C√ÄI ƒê·∫∂T ==================== -->
                <div id="settings" class="tab-content">
                    <div class="page-header">
                        <h2>‚öôÔ∏è C√†i ƒë·∫∑t h·ªá th·ªëng</h2>
                    </div>
                    <div class="settings-group">
                        <h3>üè¢ Th√¥ng Tin Trung T√¢m</h3>
                        <form id="centerInfoForm" onsubmit="saveCenterInfo(event)">
                            <div class="form-row">
                                <div class="form-group"><label>T√™n Trung T√¢m *</label>
<input type="text" id="centerName" placeholder="VD: Trung T√¢m ABC"></div>
                                <div class="form-group"><label>S·ªë ƒêi·ªán Tho·∫°i *</label>
<input type="tel" id="centerPhone" placeholder="VD: 0912345678"></div>
                            </div>
                            <div class="form-group"><label>ƒê·ªãa Ch·ªâ *</label>
<input type="text" id="centerAddress" placeholder="VD: 123 ƒê∆∞·ªùng ABC"></div>
                            <div class="form-row">
                                <div class="form-group"><label>Email</label>
<input type="email" id="centerEmail" placeholder="VD: contact@abc.edu.vn"></div>
                                <div class="form-group"><label>Website</label>
<input type="url" id="centerWebsite" placeholder="VD: https://abc.edu.vn"></div>
                            </div>
                            <div class="form-group">
                                <label>Logo</label>
                                <input type="file" id="centerLogo" accept="image/*" onchange="previewLogo(event)">
                                <div class="logo-preview" id="logoPreview"><span class="text-muted">Logo</span></div>
                            </div>
                            <button type="submit" class="btn btn-primary">üíæ L∆∞u th√¥ng tin</button>
                        </form>
                    </div>
                    <div class="settings-group">
                        <h3>üí≥ Th√¥ng Tin Ng√¢n H√†ng</h3>
                        <form id="bankInfoForm" onsubmit="saveBankInfo(event)">
                            <div class="form-row">
                                <div class="form-group"><label>T√™n Ng√¢n H√†ng *</label>
<input type="text" id="bankName" placeholder="VD: Vietcombank"></div>
                                <div class="form-group"><label>S·ªë T√†i Kho·∫£n *</label>
<input type="text" id="bankAccount" placeholder="VD: 1234567890"></div>
                            </div>
                            <div class="form-row">
                                <div class="form-group"><label>Ch·ªß T√†i Kho·∫£n *</label>
<input type="text" id="bankAccountName" placeholder="VD: NGUYEN VAN A"></div>
                                <div class="form-group"><label>Chi Nh√°nh</label>
<input type="text" id="bankBranch" placeholder="VD: Chi nh√°nh T√¢n B√¨nh"></div>
                            </div>
                            <button type="submit" class="btn btn-primary">üíæ L∆∞u th√¥ng tin</button>
                        </form>
                        <div class="mt-15">
                            <h4 style="font-size: 14px; margin-bottom: 10px;">QR Chuy·ªÉn Kho·∫£n:</h4>
                            <div id="bankQRCode"></div>
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>üîÑ Sao L∆∞u T·ª± ƒê·ªông</h3>
                        <div class="d-flex align-center gap-15">
                            <label class="d-flex align-center gap-10" style="cursor: pointer;"><input type="checkbox" id="autoBackupToggle" onchange="toggleAutoBackup()"><span>B·∫≠t sao l∆∞u t·ª±
                                    ƒë·ªông</span></label>
                            <span id="autoBackupStatus" class="text-muted"></span>
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>‚ö†Ô∏è C√†i ƒê·∫∑t C·∫£nh B√°o</h3>
                        <form id="warningSettingsForm" onsubmit="saveWarningSettings(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>C·∫£nh b√°o khi c√≤n √≠t bu·ªïi (ng∆∞·ª°ng 1 - Nh·∫π)</label>
                                    <input type="number" id="warningThreshold1" min="1" max="20" value="5" placeholder="VD: 5">
                                </div>
                                <div class="form-group">
                                    <label>C·∫£nh b√°o khi c√≤n √≠t bu·ªïi (ng∆∞·ª°ng 2 - Trung b√¨nh)</label>
                                    <input type="number" id="warningThreshold2" min="1" max="10" value="3" placeholder="VD: 3">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>C·∫£nh b√°o khi c√≤n √≠t bu·ªïi (ng∆∞·ª°ng 3 - Cao)</label>
                                    <input type="number" id="warningThreshold3" min="1" max="5" value="1" placeholder="VD: 1">
                                </div>
                                <div class="form-group">
                                    <label>Hi·ªÉn th·ªã c·∫£nh b√°o tr√™n Dashboard</label>
                                    <select id="showWarningOnDashboard">
                                        <option value="true">C√≥</option>
                                        <option value="false">Kh√¥ng</option>
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">üíæ L∆∞u c√†i ƒë·∫∑t c·∫£nh b√°o</button>
                        </form>
                    </div>

                    <div class="settings-group">
                        <h3>üóëÔ∏è X√≥a D·ªØ Li·ªáu</h3>
                        <p class="text-muted mb-15" style="font-size: 13px;">‚ö†Ô∏è H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!</p>

                        <div class="d-flex gap-10 flex-wrap">
                            <div class="settings-group">
                                <h3>üé≤ T·∫°o D·ªØ Li·ªáu Demo</h3>
                                <p class="text-muted mb-15" style="font-size: 13px;">T·∫°o d·ªØ li·ªáu m·∫´u ƒë·ªÉ test h·ªá th·ªëng.
                                    Bao g·ªìm: H·ªçc vi√™n, Gi√°o vi√™n, L·ªõp h·ªçc, Phi·∫øu ƒêK, Bi√™n lai, ƒêi·ªÉm danh, H·ªçc b√π.</p>

                                <div style="background: #EBF5FB; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                    <h4 style="margin: 0 0 10px 0; color: #1A5276; font-size: 14px;">üìã D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c
                                        t·∫°o:</h4>
                                    <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #2471A3;">
                                        <li>15 H·ªçc vi√™n (ƒë·ªß tr·∫°ng th√°i)</li>
                                        <li>4 Gi√°o vi√™n</li>
                                        <li>6 L·ªõp h·ªçc + 12 Ca h·ªçc</li>
                                        <li>12 Phi·∫øu ƒëƒÉng k√Ω</li>
                                        <li>8 Bi√™n lai thanh to√°n</li>
                                        <li>5 L·ªãch h·∫πn h·ªçc th·ª≠</li>
                                        <li>30+ ƒêi·ªÉm danh</li>
                                        <li>3 Y√™u c·∫ßu h·ªçc b√π</li>
                                    </ul>
                                </div>

                                <button class="btn btn-success" onclick="generateDemoData()">üé≤ T·∫°o D·ªØ Li·ªáu
                                    Demo</button>
                            </div>

                            <div style="flex: 1; min-width: 250px; background: #FEF9E7; padding: 15px; border-radius: 8px; border: 1px solid #F39C12;">
                                <h4 style="margin: 0 0 10px 0; color: #9A7B0A; font-size: 14px;">üßπ X√≥a D·ªØ Li·ªáu Demo
                                </h4>
                                <p style="font-size: 12px; color: #7D6608; margin-bottom: 10px;">
                                    X√≥a: H·ªçc vi√™n, L·ªãch h·∫πn, Phi·∫øu ƒêK, Bi√™n lai, Gi√°o vi√™n, L·ªõp h·ªçc, ƒêi·ªÉm danh, H·ªçc
                                    b√π.<br>
                                    <strong>Gi·ªØ l·∫°i:</strong> T√†i kho·∫£n, Ph√¢n quy·ªÅn, M√¥n h·ªçc, G√≥i h·ªçc ph√≠, Khuy·∫øn m√£i,
                                    C√†i ƒë·∫∑t.
                                </p>
                                <button class="btn btn-warning" onclick="clearDemoData()">üßπ X√≥a D·ªØ Li·ªáu Demo</button>
                            </div>

                            <div style="flex: 1; min-width: 250px; background: #FDEDEC; padding: 15px; border-radius: 8px; border: 1px solid #E74C3C;">
                                <h4 style="margin: 0 0 10px 0; color: #922B21; font-size: 14px;">üóëÔ∏è X√≥a To√†n B·ªô D·ªØ Li·ªáu
                                </h4>
                                <p style="font-size: 12px; color: #7B241C; margin-bottom: 10px;">
                                    X√≥a T·∫§T C·∫¢ d·ªØ li·ªáu nghi·ªáp v·ª•.<br>
                                    <strong>Gi·ªØ l·∫°i:</strong> Ch·ªâ gi·ªØ T√†i kho·∫£n ƒëƒÉng nh·∫≠p v√† M√¥n h·ªçc m·∫∑c ƒë·ªãnh.
                                </p>
                                <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è X√≥a To√†n B·ªô</button>
                            </div>
                        </div>
                    </div>

                </div>

            </main>
        </div>
    </div>

    <!-- ============================================================
         üîî MODALS
         ============================================================ -->

    <!-- Quick View Modal -->
    <div id="quickViewModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>üëÅÔ∏è Th√¥ng Tin Chi Ti·∫øt</h2>
<button class="modal-close" onclick="closeModal('quickViewModal')">√ó</button>
            </div>
            <div class="modal-body" id="quickViewContent"></div>
            <div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal('quickViewModal')">ƒê√≥ng</button></div>
        </div>
    </div>

    <!-- Appointment Modal -->
    <div id="appointmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="appointmentModalTitle">üìÖ ƒê·∫∑t L·ªãch H·∫πn</h2>
<button class="modal-close" onclick="closeModal('appointmentModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="appointmentForm" onsubmit="saveAppointment(event)">
                    <input type="hidden" id="appointmentStudentId"><input type="hidden" id="editAppointmentId">
                    <div class="form-group"><label>H·ªçc Vi√™n *</label>
<select id="appointmentStudentSelect" required="" onchange="onAppointmentStudentChange()">
                            <option value="">-- Ch·ªçn h·ªçc vi√™n --</option>
                        </select></div>
                    <div class="form-group"><label>M√¥n H·ªçc *</label>
<select id="appointmentSubject" required="">
                            <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
                        </select></div>
                    <div class="form-row">
                        <div class="form-group"><label>Ng√†y H·∫πn *</label>
<input type="date" id="appointmentDate" required=""></div>
                        <div class="form-group"><label>Gi·ªù H·∫πn *</label>
<input type="time" id="appointmentTime" required=""></div>
                    </div>
                    <div class="form-group"><label>Ghi Ch√∫</label>
<textarea id="appointmentNotes" rows="2" placeholder="Ghi ch√∫"></textarea></div>
                    <div id="appointmentConflictWarning" class="d-none" style="background: #FEF5E7; padding: 12px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #F39C12; font-size: 13px;">
                    </div>
                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('appointmentModal')">H·ªßy</button>
<button type="submit" form="appointmentForm" class="btn btn-success">üíæ L∆∞u</button></div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div id="registrationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã T·∫°o Phi·∫øu ƒêƒÉng K√Ω</h2>
                <button class="modal-close" onclick="closeModal('registrationModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="registrationForm" onsubmit="saveRegistration(event)">
                    <input type="hidden" id="regStudentId">
                    <input type="hidden" id="editRegId" value="">

                    <!-- Ch·ªçn h·ªçc vi√™n -->
                    <div class="form-group">
                        <label>H·ªçc Vi√™n *</label>
                        <select id="regStudentSelect" required="" onchange="onRegStudentChange()">
                            <option value="">-- Ch·ªçn h·ªçc vi√™n --</option>
                        </select>
                    </div>

                    <!-- M√¥n h·ªçc & G√≥i -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>M√¥n H·ªçc *</label>
                            <select id="regSubject" required="" onchange="loadPackagesForSubject()">
                                <option value="">-- Ch·ªçn m√¥n --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>G√≥i H·ªçc Ph√≠ *</label>
                            <select id="regPackage" required="" onchange="applyPackageFee()">
                                <option value="">-- Ch·ªçn g√≥i --</option>
                            </select>
                        </div>
                    </div>

                    <!-- S·ªë bu·ªïi & Ng√†y b·∫Øt ƒë·∫ßu -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>S·ªë Bu·ªïi H·ªçc *</label>
                            <input type="number" id="regTotalSessions" required="" min="1" max="200" placeholder="VD: 8">
                            <small class="text-muted" style="font-size: 11px;">T·ª± ƒë·ªông theo g√≥i, c√≥ th·ªÉ ch·ªânh
                                s·ª≠a</small>
                        </div>
                        <div class="form-group">
                            <label>Ng√†y B·∫Øt ƒê·∫ßu H·ªçc</label>
                            <input type="date" id="regStartDate">
                            <small class="text-muted" style="font-size: 11px;">ƒê·ªÉ tr·ªëng n·∫øu ch∆∞a x√°c ƒë·ªãnh</small>
                        </div>
                    </div>

                    <!-- H·ªçc ph√≠ -->
                    <div class="form-group">
                        <label>H·ªçc Ph√≠ (VNƒê) *</label>
                        <input type="text" id="regTuitionFee" required="" placeholder="VD: 2,000,000" oninput="formatCurrencyInput(this); calculateFinalAmount()">
                    </div>

                    <!-- Khuy·∫øn m√£i -->
                    <div class="form-group">
                        <label>Khuy·∫øn M√£i</label>
                        <div id="regPromotionList" class="checkbox-group"></div>
                    </div>

                    <!-- Gi·∫£m gi√° & Th√†nh ti·ªÅn -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>Gi·∫£m Gi√°</label>
                            <input type="text" id="regDiscountAmount" readonly="" style="background: #FDEDEC; color: #E74C3C; font-weight: 600;">
                        </div>
                        <div class="form-group">
                            <label>Th√†nh Ti·ªÅn</label>
                            <input type="text" id="regFinalAmount" readonly="" style="background: #E8F8F0; color: #27AE60; font-weight: 600;">
                        </div>
                    </div>

                    <!-- Ng√†y ƒëƒÉng k√Ω -->
                    <div class="form-group">
                        <label>Ng√†y ƒêƒÉng K√Ω *</label>
                        <input type="date" id="regDate" required="">
                    </div>

                    <!-- Ghi ch√∫ -->
                    <div class="form-group">
                        <label>Ghi Ch√∫</label>
                        <textarea id="regNotes" rows="2" placeholder="Ghi ch√∫ th√™m v·ªÅ phi·∫øu ƒëƒÉng k√Ω (t√πy ch·ªçn)"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('registrationModal')">H·ªßy</button>
                <button type="submit" form="registrationForm" class="btn btn-success">‚úÖ L∆∞u Phi·∫øu ƒêK</button>
            </div>
        </div>
    </div>

    <!-- View Registration Modal -->
    <div id="viewRegistrationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã Chi Ti·∫øt Phi·∫øu ƒêƒÉng K√Ω</h2>
<button class="modal-close" onclick="closeModal('viewRegistrationModal')">√ó</button>
            </div>
            <div class="modal-body" id="registrationPreviewContent"></div>
            <div class="modal-footer">
                <button class="btn btn-info" onclick="printRegistration()">üñ®Ô∏è In</button>
                <button class="btn btn-primary" onclick="downloadRegistrationPDF()">üìÑ T·∫£i PDF</button>
                <button class="btn btn-secondary" onclick="closeModal('viewRegistrationModal')">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üßæ T·∫°o Bi√™n Lai</h2>
<button class="modal-close" onclick="closeModal('receiptModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="receiptForm" onsubmit="saveReceipt(event)">
                    <input type="hidden" id="editReceiptId">
                    <div class="form-group">
                        <label>Lo·∫°i bi√™n lai *</label>
                        <select id="receiptType" required="" onchange="onReceiptTypeChange()">
                            <option value="">-- Ch·ªçn lo·∫°i --</option>
                            <optgroup label="Thu ti·ªÅn">
                                <option value="Bi√™n Lai ƒêi·ªán T·ª≠">üí≥ Bi√™n Lai ƒêi·ªán T·ª≠ (Chuy·ªÉn kho·∫£n)</option>
                                <option value="Phi·∫øu Thu">üíµ Phi·∫øu Thu (Ti·ªÅn m·∫∑t)</option>
                            </optgroup>
                            <optgroup label="Chi ti·ªÅn">
                                <option value="Phi·∫øu Chi">üî¥ Phi·∫øu Chi (Ho√†n ti·ªÅn)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="form-group"><label>H·ªçc Vi√™n *</label>
<select id="receiptStudentId" required="" onchange="fillReceiptStudentInfo()">
                            <option value="">-- Ch·ªçn h·ªçc vi√™n --</option>
                        </select></div>
                    <div class="form-row">
                        <div class="form-group"><label>Ph·ª• Huynh</label>
<input type="text" id="receiptParentName" readonly="" style="background: var(--bg-light);"></div>
                        <div class="form-group"><label>SƒêT</label>
<input type="text" id="receiptParentPhone" readonly="" style="background: var(--bg-light);"></div>
                    </div>
                    <div class="form-group"><label>Li√™n k·∫øt Phi·∫øu ƒêK</label>
<select id="receiptRegistrationSelect" onchange="fillFromRegistration()">
                            <option value="">-- Ch·ªçn phi·∫øu ƒêK --</option>
                        </select>
<input type="hidden" id="receiptRegistrationId"></div>
                    <div class="form-group"><label>N·ªôi Dung *</label>
<input type="text" id="receiptDescription" required="" placeholder="VD: H·ªçc ph√≠ th√°ng 1"></div>
                    <div class="form-row">
                        <div class="form-group"><label>S·ªë Ti·ªÅn (VNƒê) *</label>
<input type="text" id="receiptAmount" required="" placeholder="VD: 2,000,000" oninput="formatCurrencyInput(this)"></div>
                        <div class="form-group"><label>Ng√†y *</label>
<input type="date" id="receiptDate" required=""></div>
                    </div>
                    <div class="form-group"><label>Ghi Ch√∫</label>
<textarea id="receiptNotes" rows="2" placeholder="Ghi ch√∫"></textarea></div>
                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('receiptModal')">H·ªßy</button>
<button type="submit" form="receiptForm" class="btn btn-success">üíæ L∆∞u</button></div>
        </div>
    </div>

    <!-- View Receipt Modal -->
    <div id="viewReceiptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üßæ Xem Bi√™n Lai</h2>
<button class="modal-close" onclick="closeModal('viewReceiptModal')">√ó</button>
            </div>
            <div class="modal-body" id="receiptPreviewContent"></div>
            <div class="modal-footer">
                <button class="btn btn-info" onclick="printReceipt()">üñ®Ô∏è In</button>
                <button class="btn btn-primary" onclick="downloadReceiptPDF()">üìÑ T·∫£i PDF</button>
                <button class="btn btn-secondary" onclick="closeModal('viewReceiptModal')">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Subject Modal -->
    <div id="subjectModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 id="subjectModalTitle">üìñ Th√™m M√¥n H·ªçc</h2>
<button class="modal-close" onclick="closeModal('subjectModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="subjectForm" onsubmit="saveSubject(event)">
                    <input type="hidden" id="editSubjectId">
                    <div class="form-row">
                        <div class="form-group"><label>Icon *</label>
<input type="text" id="subjectIcon" required="" placeholder="VD: ‚ôüÔ∏è"></div>
                        <div class="form-group"><label>T√™n M√¥n *</label>
<input type="text" id="subjectName" required="" placeholder="VD: C·ªù Vua"></div>
                    </div>
                    <div class="form-group"><label>H·ªçc Ph√≠ M·∫∑c ƒê·ªãnh *</label>
<input type="text" id="subjectDefaultFee" required="" placeholder="VD: 2,000,000" oninput="formatCurrencyInput(this)"></div>
                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('subjectModal')">H·ªßy</button>
<button type="submit" form="subjectForm" class="btn btn-success">üíæ L∆∞u</button></div>
        </div>
    </div>

    <!-- Package Modal -->
    <div id="packageModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 id="packageModalTitle">üì¶ Th√™m G√≥i H·ªçc Ph√≠</h2>
<button class="modal-close" onclick="closeModal('packageModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="packageForm" onsubmit="savePackage(event)">
                    <input type="hidden" id="editPackageId">
                    <div class="form-group"><label>T√™n G√≥i *</label>
<input type="text" id="packageName" required="" placeholder="VD: G√≥i C∆° B·∫£n"></div>
                    <div class="form-row">
                        <div class="form-group"><label>M√¥n H·ªçc *</label>
<select id="packageSubject" required=""></select>
                        </div>
                        <div class="form-group"><label>S·ªë Bu·ªïi *</label>
<input type="number" id="packageSessions" required="" min="1" placeholder="VD: 8"></div>
                    </div>
                    <div class="form-group"><label>H·ªçc Ph√≠ *</label>
<input type="text" id="packageFee" required="" placeholder="VD: 1,600,000" oninput="formatCurrencyInput(this)"></div>
                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('packageModal')">H·ªßy</button>
<button type="submit" form="packageForm" class="btn btn-success">üíæ L∆∞u</button></div>
        </div>
    </div>

    <!-- Promotion Modal -->
    <div id="promotionModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 id="promotionModalTitle">üéÅ Th√™m Khuy·∫øn M√£i</h2>
<button class="modal-close" onclick="closeModal('promotionModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="promotionForm" onsubmit="savePromotion(event)">
                    <input type="hidden" id="editPromotionId">
                    <div class="form-group"><label>T√™n KM *</label>
<input type="text" id="promotionName" required="" placeholder="VD: KM Khai Tr∆∞∆°ng"></div>
                    <div class="form-row">
                        <div class="form-group"><label>Lo·∫°i *</label>
<select id="promotionType" required="">
                                <option value="percent">Gi·∫£m %</option>
                                <option value="fixed">Gi·∫£m VNƒê</option>
                            </select></div>
                        <div class="form-group"><label>Gi√° Tr·ªã *</label>
<input type="number" id="promotionValue" required="" min="0" placeholder="VD: 10"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label>T·ª´ Ng√†y *</label>
<input type="date" id="promotionStartDate" required=""></div>
                        <div class="form-group"><label>ƒê·∫øn Ng√†y *</label>
<input type="date" id="promotionEndDate" required=""></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('promotionModal')">H·ªßy</button>
<button type="submit" form="promotionForm" class="btn btn-success">üíæ L∆∞u</button></div>
        </div>
    </div>

    <!-- User Modal (Th√™m/S·ª≠a t√†i kho·∫£n) -->
    <div id="userModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 id="userModalTitle">üë§ Th√™m T√†i Kho·∫£n</h2>
<button class="modal-close" onclick="closeModal('userModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="userForm" onsubmit="saveUser(event)">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label>T√™n ƒëƒÉng nh·∫≠p *</label>
                        <input type="text" id="userUsername" required="" placeholder="VD: nhanvien01" pattern="[a-zA-Z0-9_]+" title="Ch·ªâ ch·ªØ, s·ªë v√† d·∫•u g·∫°ch d∆∞·ªõi">
                    </div>
                    <div class="form-group" id="passwordGroup">
                        <label>M·∫≠t kh·∫©u *</label>
                        <input type="password" id="userPassword" placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" minlength="6">
                    </div>
                    <div class="form-group">
                        <label>H·ªç t√™n *</label>
                        <input type="text" id="userFullName" required="" placeholder="VD: Nguy·ªÖn VƒÉn A">
                    </div>
                    <div class="form-group">
                        <label>Vai tr√≤ *</label>
                        <select id="userRole" required="">
                            <option value="user">User - Ch·ªâ xem</option>
                            <option value="manager">Manager - Qu·∫£n l√Ω</option>
                            <option value="admin">Admin - To√†n quy·ªÅn</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('userModal')">H·ªßy</button>
<button type="submit" form="userForm" class="btn btn-success">üíæ L∆∞u</button></div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2>üîë ƒê·ªïi M·∫≠t Kh·∫©u</h2>
<button class="modal-close" onclick="closeModal('changePasswordModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm" onsubmit="handleChangePassword(event)">
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u hi·ªán t·∫°i *</label>
                        <div class="input-wrapper">
                            <input type="password" id="currentPassword" required="" placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i" style="padding-right: 45px;">
                            <button type="button" class="password-toggle" onclick="togglePasswordField('currentPassword', this)">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u m·ªõi *</label>
                        <div class="input-wrapper">
                            <input type="password" id="newPassword" required="" placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" minlength="6" style="padding-right: 45px;">
                            <button type="button" class="password-toggle" onclick="togglePasswordField('newPassword', this)">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi *</label>
                        <div class="input-wrapper">
                            <input type="password" id="confirmPassword" required="" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi" style="padding-right: 45px;">
                            <button type="button" class="password-toggle" onclick="togglePasswordField('confirmPassword', this)">üëÅÔ∏è</button>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('changePasswordModal')">H·ªßy</button>
<button type="submit" form="changePasswordForm" class="btn btn-success">üíæ ƒê·ªïi m·∫≠t kh·∫©u</button></div>
        </div>
    </div>

    <!-- Force Change Password Modal (B·∫Øt bu·ªôc ƒë·ªïi m·∫≠t kh·∫©u) -->
    <div id="forceChangePasswordModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header" style="background: #FEF5E7; border-bottom-color: #F39C12;">
                <h2 style="color: #D68910;">üîê B·∫Øt Bu·ªôc ƒê·ªïi M·∫≠t Kh·∫©u</h2>
                <!-- Kh√¥ng c√≥ n√∫t ƒë√≥ng - b·∫Øt bu·ªôc ph·∫£i ƒë·ªïi -->
            </div>
            <div class="modal-body">
                <div style="background: #FEF9E7; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #F39C12;">
                    <p style="margin: 0; color: #9A7B0A; font-size: 14px;">
                        <strong>‚ö†Ô∏è Th√¥ng b√°o b·∫£o m·∫≠t:</strong>
<br>
                        H·ªá th·ªëng ƒë√£ n√¢ng c·∫•p b·∫£o m·∫≠t. Anh/Ch·ªã c·∫ßn ƒë·ªïi m·∫≠t kh·∫©u m·ªõi ƒë·ªÉ ti·∫øp t·ª•c s·ª≠ d·ª•ng.
                    </p>
                </div>
                <form id="forceChangePasswordForm" onsubmit="handleForceChangePassword(event)">
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u m·ªõi *</label>
                        <input type="password" id="forceNewPassword" required="" placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" minlength="6">
                    </div>
                    <div class="form-group">
                        <label>X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi *</label>
                        <input type="password" id="forceConfirmPassword" required="" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi">
                    </div>
                    <div id="forcePasswordError" style="color: #E74C3C; font-size: 13px; margin-bottom: 15px; display: none;"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="submit" form="forceChangePasswordForm" class="btn btn-warning">üîê ƒê·ªïi M·∫≠t Kh·∫©u
                    Ngay</button>
            </div>
        </div>
    </div>

    <!-- Teacher Modal -->
    <div id="teacherModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="teacherModalTitle">üë®‚Äçüè´ Th√™m Gi√°o Vi√™n</h2>
                <button class="modal-close" onclick="closeModal('teacherModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="teacherForm" onsubmit="saveTeacher(event)">
                    <input type="hidden" id="editTeacherId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>H·ªç t√™n *</label>
                            <input type="text" id="teacherFullName" required="" placeholder="VD: Nguy·ªÖn VƒÉn A">
                        </div>
                        <div class="form-group">
                            <label>S·ªë ƒëi·ªán tho·∫°i *</label>
                            <input type="tel" id="teacherPhone" required="" placeholder="VD: 0901234567">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="teacherEmail" placeholder="VD: email@example.com">
                    </div>
                    <div class="form-group">
                        <label>M√¥n d·∫°y *</label>
                        <div class="checkbox-group" id="teacherSubjectsCheckboxes"></div>
                    </div>
                    <div class="form-group">
                        <label>Lo·∫°i l∆∞∆°ng *</label>
                        <select id="teacherSalaryType" required="" onchange="toggleSalaryFields()">
                            <option value="per_session">üíµ Theo bu·ªïi d·∫°y</option>
                            <option value="fixed">üí∞ L∆∞∆°ng c·ªë ƒë·ªãnh/th√°ng</option>
                            <option value="both">üí≥ C·∫£ hai (C·ªë ƒë·ªãnh + Theo bu·ªïi)</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group" id="fixedSalaryGroup" style="display: none;">
                            <label>L∆∞∆°ng c·ªë ƒë·ªãnh/th√°ng</label>
                            <input type="text" id="teacherFixedSalary" placeholder="VD: 5,000,000" oninput="formatCurrencyInput(this)">
                        </div>
                        <div class="form-group" id="perSessionGroup">
                            <label>Ti·ªÅn/bu·ªïi d·∫°y</label>
                            <input type="text" id="teacherPerSession" placeholder="VD: 200,000" oninput="formatCurrencyInput(this)">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ghi ch√∫</label>
                        <textarea id="teacherNotes" rows="2" placeholder="Ghi ch√∫ th√™m..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('teacherModal')">H·ªßy</button>
                <button type="submit" form="teacherForm" class="btn btn-success">üíæ L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- View Teacher Modal -->
    <div id="viewTeacherModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>üë®‚Äçüè´ Chi ti·∫øt Gi√°o vi√™n</h2>
                <button class="modal-close" onclick="closeModal('viewTeacherModal')">√ó</button>
            </div>
            <div class="modal-body" id="viewTeacherContent"></div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('viewTeacherModal')">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Class Modal -->
    <div id="classModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="classModalTitle">üìö Th√™m L·ªõp H·ªçc</h2>
                <button class="modal-close" onclick="closeModal('classModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="classForm" onsubmit="saveClass(event)">
                    <input type="hidden" id="editClassId">
                    <div class="form-group">
                        <label>T√™n l·ªõp *</label>
                        <input type="text" id="className" required="" placeholder="VD: C·ªù Vua - L·ªõp A1">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>M√¥n h·ªçc *</label>
                            <select id="classSubject" required="" onchange="filterTeachersBySubject()">
                                <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Gi√°o vi√™n</label>
                            <select id="classTeacher">
                                <option value="">-- Ch·ªçn gi√°o vi√™n --</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Lo·∫°i l·ªõp *</label>
                            <select id="classType" required="" onchange="toggleMaxStudents()">
                                <option value="group">üë• L·ªõp nh√≥m</option>
                                <option value="1on1">üë§ 1 k√®m 1</option>
                            </select>
                        </div>
                        <div class="form-group" id="maxStudentsGroup">
                            <label>Sƒ© s·ªë t·ªëi ƒëa *</label>
                            <input type="number" id="classMaxStudents" required="" min="1" max="30" value="10">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Tr·∫°ng th√°i</label>
                        <select id="classStatus">
                            <option value="new">üÜï L·ªõp m·ªõi</option>
                            <option value="active">üü¢ ƒêang h·ªçc</option>
                            <option value="completed">‚úÖ Ho√†n th√†nh</option>
                            <option value="cancelled">‚ùå ƒê√£ h·ªßy</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ghi ch√∫</label>
                        <textarea id="classNotes" rows="2" placeholder="Ghi ch√∫ th√™m..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('classModal')">H·ªßy</button>
                <button type="submit" form="classForm" class="btn btn-success">üíæ L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- View Class Modal -->
    <div id="viewClassModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>üìö Chi ti·∫øt L·ªõp h·ªçc</h2>
                <button class="modal-close" onclick="closeModal('viewClassModal')">√ó</button>
            </div>
            <div class="modal-body" id="viewClassContent"></div>
            <div class="modal-footer">
                <button class="btn btn-info" onclick="openScheduleModal()">üìÖ Th√™m ca h·ªçc</button>
                <button class="btn btn-success" onclick="openAssignStudentModal()">üë§ Th√™m h·ªçc vi√™n</button>
                <button class="btn btn-secondary" onclick="closeModal('viewClassModal')">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Schedule Modal (Th√™m ca h·ªçc) -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2>üìÖ Th√™m Ca H·ªçc</h2>
                <button class="modal-close" onclick="closeModal('scheduleModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="scheduleForm" onsubmit="saveSchedule(event)">
                    <input type="hidden" id="scheduleClassId">
                    <input type="hidden" id="editScheduleId">
                    <div class="form-group">
                        <label>Ng√†y trong tu·∫ßn *</label>
                        <select id="scheduleDayOfWeek" required="">
                            <option value="1">Th·ª© 2</option>
                            <option value="2">Th·ª© 3</option>
                            <option value="3">Th·ª© 4</option>
                            <option value="4">Th·ª© 5</option>
                            <option value="5">Th·ª© 6</option>
                            <option value="6">Th·ª© 7</option>
                            <option value="7">Ch·ªß nh·∫≠t</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Gi·ªù b·∫Øt ƒë·∫ßu *</label>
                            <input type="time" id="scheduleStartTime" required="" value="08:30">
                        </div>
                        <div class="form-group">
                            <label>Gi·ªù k·∫øt th√∫c *</label>
                            <input type="time" id="scheduleEndTime" required="" value="10:00">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ph√≤ng h·ªçc</label>
                        <select id="scheduleRoom">
                            <option value="">-- Ch·ªçn ph√≤ng --</option>
                        </select>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('scheduleModal')">H·ªßy</button>
                <button type="submit" form="scheduleForm" class="btn btn-success">üíæ L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- View Attendance Detail Modal - C·∫¨P NH·∫¨T -->
    <div id="viewAttendanceModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>üìã Chi ti·∫øt ƒëi·ªÉm danh</h2>
                <button class="modal-close" onclick="closeModal('viewAttendanceModal')">√ó</button>
            </div>
            <div class="modal-body" id="viewAttendanceContent"></div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="btnEditAttendanceBatch" onclick="enableEditAttendanceMode()">‚úèÔ∏è S·ª≠a
                    ƒëi·ªÉm danh</button>
                <button class="btn btn-success d-none" id="btnSaveAttendanceBatch" onclick="saveEditedAttendance()">üíæ
                    L∆∞u thay ƒë·ªïi</button>
                <button class="btn btn-secondary d-none" id="btnCancelEditAttendance" onclick="cancelEditAttendance()">‚ùå
                    H·ªßy s·ª≠a</button>
                <button class="btn btn-secondary" id="btnCloseAttendanceDetail" onclick="closeModal('viewAttendanceModal')">ƒê√≥ng</button>
            </div>
        </div>
    </div>
    <!-- Confirm Change Attendance Status Modal -->
    <div id="confirmAttendanceChangeModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 id="confirmAttendanceChangeTitle">‚ö†Ô∏è X√°c nh·∫≠n thay ƒë·ªïi</h2>
                <button class="modal-close" onclick="closeModal('confirmAttendanceChangeModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div id="confirmAttendanceChangeContent"></div>
                <input type="hidden" id="confirmAttendanceId">
                <input type="hidden" id="confirmAttendanceOldStatus">
                <input type="hidden" id="confirmAttendanceNewStatus">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('confirmAttendanceChangeModal')">H·ªßy</button>
                <button class="btn btn-warning" id="btnConfirmAttendanceChange" onclick="executeAttendanceStatusChange()">‚úÖ X√°c nh·∫≠n</button>
            </div>
        </div>
    </div>

    <!-- Schedule Makeup Modal -->
    <div id="scheduleMakeupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìÖ X·∫øp l·ªãch h·ªçc b√π</h2>
                <button class="modal-close" onclick="closeModal('scheduleMakeupModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="scheduleMakeupForm" onsubmit="saveMakeupSchedule(event)">
                    <input type="hidden" id="makeupRequestId">

                    <div class="quick-view-section">
                        <h4>üìã Th√¥ng tin y√™u c·∫ßu</h4>
                        <div class="quick-view-row">
                            <span class="quick-view-label">H·ªçc vi√™n:</span>
                            <span class="quick-view-value" id="makeupStudentName"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">L·ªõp g·ªëc:</span>
                            <span class="quick-view-value" id="makeupOriginalClass"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">Ng√†y ngh·ªâ:</span>
                            <span class="quick-view-value" id="makeupOriginalDate"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">H·∫°n h·ªçc b√π:</span>
                            <span class="quick-view-value" id="makeupExpiryDate"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Ch·ªçn l·ªõp h·ªçc b√π *</label>
                        <select id="makeupClassSelect" required="" onchange="loadMakeupSchedules()">
                            <option value="">-- Ch·ªçn l·ªõp --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Ch·ªçn ng√†y h·ªçc b√π *</label>
                        <input type="date" id="makeupDate" required="" onchange="loadMakeupSchedules()">
                    </div>

                    <div class="form-group">
                        <label>Ch·ªçn ca h·ªçc *</label>
                        <select id="makeupScheduleSelect" required="">
                            <option value="">-- Ch·ªçn ca h·ªçc --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Ghi ch√∫</label>
                        <textarea id="makeupNotes" rows="2" placeholder="Ghi ch√∫ th√™m..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('scheduleMakeupModal')">H·ªßy</button>
                <button type="submit" form="scheduleMakeupForm" class="btn btn-success">üìÖ X·∫øp l·ªãch</button>
            </div>
        </div>
    </div>
    <!-- Debt Payment Modal -->
    <div id="debtPaymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üí≥ Thanh To√°n C√¥ng N·ª£</h2>
                <button class="modal-close" onclick="closeModal('debtPaymentModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="debtPaymentForm" onsubmit="saveDebtPayment(event)">
                    <input type="hidden" id="paymentRegistrationId">

                    <div class="quick-view-section">
                        <h4>üìã Th√¥ng tin c√¥ng n·ª£</h4>
                        <div class="quick-view-row">
                            <span class="quick-view-label">H·ªçc vi√™n:</span>
                            <span class="quick-view-value" id="paymentStudentName"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">M√£ phi·∫øu ƒêK:</span>
                            <span class="quick-view-value" id="paymentRegCode"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">T·ªïng ti·ªÅn:</span>
                            <span class="quick-view-value" id="paymentTotalAmount"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">ƒê√£ ƒë√≥ng:</span>
                            <span class="quick-view-value text-success" id="paymentPaidAmount"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">C√≤n n·ª£:</span>
                            <span class="quick-view-value text-danger fw-700" id="paymentDebtAmount"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>S·ªë ti·ªÅn thanh to√°n *</label>
                        <input type="text" id="paymentAmount" required="" placeholder="VD: 1,000,000" oninput="formatCurrencyInput(this); calculateRemainingDebt()">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Lo·∫°i bi√™n lai *</label>
                            <select id="paymentReceiptType" required="">
                                <option value="Bi√™n Lai ƒêi·ªán T·ª≠">üí≥ Bi√™n Lai ƒêi·ªán T·ª≠</option>
                                <option value="Phi·∫øu Thu">üíµ Phi·∫øu Thu</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ng√†y thanh to√°n *</label>
                            <input type="date" id="paymentDate" required="">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Ghi ch√∫</label>
                        <textarea id="paymentNotes" rows="2" placeholder="Ghi ch√∫ th√™m..."></textarea>
                    </div>

                    <div id="paymentPreview" style="background: #E8F8F0; padding: 12px; border-radius: 8px; margin-top: 10px;">
                        <p style="margin: 0; font-size: 13px;">
                            Sau khi thanh to√°n, c√≤n n·ª£: <strong id="paymentRemainingPreview" class="text-success">0
                                ‚Ç´</strong>
                        </p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('debtPaymentModal')">H·ªßy</button>
                <button type="submit" form="debtPaymentForm" class="btn btn-success">üí∞ Thanh to√°n</button>
            </div>
        </div>
    </div>

    <!-- Debt Detail Modal -->
    <div id="debtDetailModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>üìã Chi Ti·∫øt C√¥ng N·ª£</h2>
                <button class="modal-close" onclick="closeModal('debtDetailModal')">√ó</button>
            </div>
            <div class="modal-body" id="debtDetailContent"></div>
            <div class="modal-footer">
                <button class="btn btn-success" id="debtDetailPayBtn" onclick="openPaymentFromDetail()">üí∞ Thanh
                    to√°n</button>
                <button class="btn btn-secondary" onclick="closeModal('debtDetailModal')">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Adjust Debt Modal -->
    <div id="adjustDebtModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2>‚úèÔ∏è ƒêi·ªÅu Ch·ªânh C√¥ng N·ª£</h2>
                <button class="modal-close" onclick="closeModal('adjustDebtModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="adjustDebtForm" onsubmit="saveAdjustedDebt(event)">
                    <input type="hidden" id="adjustRegistrationId">

                    <div class="quick-view-section">
                        <h4>üìã Th√¥ng tin hi·ªán t·∫°i</h4>
                        <div class="quick-view-row">
                            <span class="quick-view-label">H·ªçc vi√™n:</span>
                            <span class="quick-view-value" id="adjustStudentName"></span>
                        </div>
                        <div class="quick-view-row">
                            <span class="quick-view-label">T·ªïng ti·ªÅn g·ªëc:</span>
                            <span class="quick-view-value" id="adjustOriginalAmount"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>T·ªïng ti·ªÅn m·ªõi (sau ƒëi·ªÅu ch·ªânh) *</label>
                        <input type="text" id="adjustNewAmount" required="" placeholder="VD: 2,000,000" oninput="formatCurrencyInput(this)">
                    </div>

                    <div class="form-group">
                        <label>L√Ω do ƒëi·ªÅu ch·ªânh *</label>
                        <textarea id="adjustReason" rows="2" required="" placeholder="VD: Gi·∫£m h·ªçc ph√≠ ƒë·∫∑c bi·ªát..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('adjustDebtModal')">H·ªßy</button>
                <button type="submit" form="adjustDebtForm" class="btn btn-warning">‚úèÔ∏è ƒêi·ªÅu ch·ªânh</button>
            </div>
        </div>
    </div>

    <!-- Create Makeup Request Modal -->
    <div id="createMakeupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï T·∫°o Y√™u C·∫ßu H·ªçc B√π</h2>
                <button class="modal-close" onclick="closeModal('createMakeupModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="createMakeupForm" onsubmit="saveNewMakeupRequest(event)">
                    <div class="form-group">
                        <label>Ch·ªçn l·ªõp *</label>
                        <select id="newMakeupClassSelect" required="" onchange="loadStudentsForMakeup()">
                            <option value="">-- Ch·ªçn l·ªõp h·ªçc --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ch·ªçn h·ªçc vi√™n *</label>
                        <select id="newMakeupStudentSelect" required="">
                            <option value="">-- Ch·ªçn h·ªçc vi√™n --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ng√†y d·ª± ki·∫øn ngh·ªâ *</label>
                        <input type="date" id="newMakeupAbsentDate" required="">
                    </div>
                    <div class="form-group">
                        <label>L√Ω do ngh·ªâ</label>
                        <textarea id="newMakeupReason" rows="2" placeholder="VD: B·∫≠n vi·ªác gia ƒë√¨nh, ƒëi du l·ªãch..."></textarea>
                    </div>
                    <div style="background: #FEF9E7; padding: 12px; border-radius: 8px; margin-top: 15px;">
                        <p style="margin: 0; color: #9A7B0A; font-size: 13px;">
                            ‚ö†Ô∏è <strong>L∆∞u √Ω:</strong> Y√™u c·∫ßu h·ªçc b√π n√†y s·∫Ω ƒë∆∞·ª£c t·∫°o tr∆∞·ªõc. Khi ƒë·∫øn ng√†y ngh·ªâ, anh/ch·ªã
                            v·∫´n c·∫ßn ƒëi·ªÉm danh "C√≥ ph√©p" ƒë·ªÉ tr·ª´ bu·ªïi ch√≠nh th·ª©c.
                        </p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('createMakeupModal')">H·ªßy</button>
                <button type="submit" form="createMakeupForm" class="btn btn-success">‚ûï T·∫°o y√™u c·∫ßu</button>
            </div>
        </div>
    </div>

    <!-- Confirm Makeup Completed Modal -->
    <div id="confirmMakeupModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2>‚úÖ X√°c nh·∫≠n h·ªçc b√π</h2>
                <button class="modal-close" onclick="closeModal('confirmMakeupModal')">√ó</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="confirmMakeupId">
                <div class="quick-view-section">
                    <p>X√°c nh·∫≠n h·ªçc vi√™n <strong id="confirmMakeupStudent"></strong> ƒë√£ ho√†n th√†nh bu·ªïi h·ªçc b√π?</p>
                    <div class="quick-view-row">
                        <span class="quick-view-label">L·ªõp h·ªçc b√π:</span>
                        <span class="quick-view-value" id="confirmMakeupClass"></span>
                    </div>
                    <div class="quick-view-row">
                        <span class="quick-view-label">Ng√†y h·ªçc b√π:</span>
                        <span class="quick-view-value" id="confirmMakeupDate"></span>
                    </div>
                </div>
                <div style="background: #E8F8F0; padding: 12px; border-radius: 8px; margin-top: 15px;">
                    <p style="margin: 0; color: #27AE60; font-size: 13px;">
                        ‚úÖ Sau khi x√°c nh·∫≠n, bu·ªïi h·ªçc b√π s·∫Ω ƒë∆∞·ª£c ghi nh·∫≠n. S·ªë bu·ªïi c√≤n l·∫°i c·ªßa h·ªçc vi√™n s·∫Ω <strong>KH√îNG
                            b·ªã tr·ª´</strong>.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('confirmMakeupModal')">H·ªßy</button>
                <button type="button" class="btn btn-success" onclick="completeMakeupRequest()">‚úÖ X√°c nh·∫≠n ho√†n
                    th√†nh</button>
            </div>
        </div>
    </div>

    <!-- Room Modal (Th√™m/S·ª≠a ph√≤ng h·ªçc) -->
    <div id="roomModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 id="roomModalTitle">üè´ Th√™m Ph√≤ng H·ªçc</h2>
                <button class="modal-close" onclick="closeModal('roomModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="roomForm" onsubmit="saveRoom(event)">
                    <input type="hidden" id="editRoomId">
                    <div class="form-group">
                        <label>T√™n ph√≤ng *</label>
                        <input type="text" id="roomName" required="" placeholder="VD: Ph√≤ng A1, Ph√≤ng VIP">
                    </div>
                    <div class="form-group">
                        <label>S·ª©c ch·ª©a (ng∆∞·ªùi) *</label>
                        <input type="number" id="roomCapacity" required="" min="1" max="100" placeholder="VD: 15">
                    </div>
                    <div class="form-group">
                        <label>Trang thi·∫øt b·ªã</label>
                        <input type="text" id="roomEquipment" placeholder="VD: M√°y chi·∫øu, ƒêi·ªÅu h√≤a, B·∫£ng tr·∫Øng">
                    </div>
                    <div class="form-group">
                        <label>Tr·∫°ng th√°i *</label>
                        <select id="roomStatus" required="">
                            <option value="active">üü¢ ƒêang ho·∫°t ƒë·ªông</option>
                            <option value="maintenance">üü† ƒêang b·∫£o tr√¨</option>
                            <option value="inactive">‚ö´ Ng∆∞ng s·ª≠ d·ª•ng</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ghi ch√∫</label>
                        <textarea id="roomNotes" rows="2" placeholder="Ghi ch√∫ th√™m..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('roomModal')">H·ªßy</button>
                <button type="submit" form="roomForm" class="btn btn-success">üíæ L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- Assign Student to Class Modal -->
    <div id="assignStudentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üë§ Th√™m H·ªçc Vi√™n V√†o L·ªõp</h2>
                <button class="modal-close" onclick="closeModal('assignStudentModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="assignStudentForm" onsubmit="assignStudentToClass(event)">
                    <input type="hidden" id="assignClassId">
                    <div class="form-group">
                        <label>Ch·ªçn Phi·∫øu ƒëƒÉng k√Ω *</label>
                        <select id="assignRegistrationId" required="" onchange="showRegistrationInfo()">
                            <option value="">-- Ch·ªçn phi·∫øu ƒêK ch∆∞a g√°n l·ªõp --</option>
                        </select>
                    </div>
                    <div id="assignRegistrationInfo" style="display: none;">
                        <div class="quick-view-section">
                            <h4>üìã Th√¥ng tin Phi·∫øu ƒêK</h4>
                            <div class="quick-view-row">
                                <span class="quick-view-label">H·ªçc vi√™n:</span>
                                <span class="quick-view-value" id="assignStudentName"></span>
                            </div>
                            <div class="quick-view-row">
                                <span class="quick-view-label">M√¥n h·ªçc:</span>
                                <span class="quick-view-value" id="assignSubject"></span>
                            </div>
                            <div class="quick-view-row">
                                <span class="quick-view-label">S·ªë bu·ªïi:</span>
                                <span class="quick-view-value" id="assignTotalSessions"></span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('assignStudentModal')">H·ªßy</button>
                <button type="submit" form="assignStudentForm" class="btn btn-success">‚úÖ G√°n v√†o l·ªõp</button>
            </div>
        </div>
    </div>

    <!-- Reset Password Modal (Admin reset cho user) -->
    <div id="resetPasswordModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2>üîÑ Reset M·∫≠t Kh·∫©u</h2>
<button class="modal-close" onclick="closeModal('resetPasswordModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="resetPasswordForm" onsubmit="handleResetPassword(event)">
                    <input type="hidden" id="resetPasswordUserId">
                    <p class="mb-15">Reset m·∫≠t kh·∫©u cho t√†i kho·∫£n: <strong id="resetPasswordUsername"></strong></p>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u m·ªõi *</label>
                        <div class="input-wrapper">
                            <input type="password" id="resetNewPassword" required="" placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" minlength="6" style="padding-right: 45px;">
                            <button type="button" class="password-toggle" onclick="togglePasswordField('resetNewPassword', this)">üëÅÔ∏è</button>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" onclick="closeModal('resetPasswordModal')">H·ªßy</button>
<button type="submit" form="resetPasswordForm" class="btn btn-warning">üîÑ Reset</button></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- ============================================================
         üìú JAVASCRIPT - PH·∫¶N 2/2
         ============================================================ -->
    

    <!-- JavaScript -->
    <script src="js/app.js"></script>
</body></html>